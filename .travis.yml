language: node_js
node_js:
- 0.1
before_script:
- git config --global user.email "benjamin1990@163.com"
- git config --global user.name "shangmin1990"
- cd gh-pages && git pull origin gh-pages && git remote set-url origin "https://${GH_TOKEN}@github.com/shangmin1990/website-ui.git"
- cd ${TRAVIS_BUILD_DIR}
- cd bower-website-ui && git pull origin master && git remote set-url origin "https://${GH_TOKEN}@github.com/shangmin1990/bower-website-ui.git"
- cd ${TRAVIS_BUILD_DIR}
script:
- bower install
- gulp
- ls
after_script:
- cd gh-pages &&  git rm -rf  `find . -maxdepth 1 -name "*" ! -name ".git*"`
- cp -r ../bower_components/ ../index.html ../templates/ ../build/ ./
- git add . && git commit -a -m "Generated by shangmin1990/website-ui@${TRAVIS_COMMIT}"
  && git push -f origin HEAD:gh-pages
- cd ${TRAVIS_BUILD_DIR}
- cd bower-website-ui && git add . && git commit -a -m "Generated by shangmin1990/website-ui@${TRAVIS_COMMIT}" && git push origin HEAD:master
env:
  global:
  - secure: j9U47/2pAlQp31EC8y+R1QhsKnzztlVBiGqiYwuSA1E37G/ECS1z7zI5kVvjlE1JYwDX1SfaYVVPxuhitHdBkQcy4m/+ub6COXEj1O0doy7jL2nQDrOqW/8o/CsOrASbYwTxTL2ixxLLHJlYB7dE8qiejq/uCsnCqlrGsOHvyTM=
