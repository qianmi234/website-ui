language: node_js
node_js:
- 0.10
before_script:
- git config --global user.email "benjamin1990@163.com"
- git config --global user.name "shangmin1990"
# - cd bower-website-ui && git pull origin bower-website-ui && git remote set-url origin "https://${GH_TOKEN}@github.com/shangmin1990/website-ui.git"
# - cd ${TRAVIS_BUILD_DIR}
- cd gh-pages && git pull origin gh-pages && git remote set-url origin "https://${GH_TOKEN}@github.com/shangmin1990/website-ui.git"
- cd ${TRAVIS_BUILD_DIR}
script:
- bower install
- gulp
- ls
after_script:
- cd gh-pages &&  git rm -rf  `find . -maxdepth 1 -name "*" ! -name ".git*"`
- cp -r ../bower_components/ ../index.html ../templates/ ../build/ ./
- git add . && git commit -a -m "Generated by shangmin1990/website-ui@${TRAVIS_COMMIT}" && git push
  -f origin HEAD:gh-pages
-
env:
  global:
  - secure: eFSQzIY6Tg+HlfqHbLwUeKUQyJvbpDK66TlfC/IoySO901jXrgkpAt1AAGVST0zrqM2RQCbdwxm9woMSiqvw4GVijbmqmTc8SG8+GUHgDEk7+eAmeA9eA38smTeWwYIFY4aJm9wPQZKDL/NGVsOi8VVaNvA2sdxKQpIa3xZlLyA=
